<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
   
<mapper namespace="com.pickme.beeze.customer.dao.CustomerDao">

<!-- 장바구니 담기 -->
<select id="getsProductId" parameterType="map" resultType="Integer">
	select store_product.id
	from store_product
	inner join product on store_product.product_id = product.id
	where product.name = #{productName} and store_product.store_id = #{storeId};
</select>
<select id="getCustomerId" parameterType="String" resultType="Integer">
	select id
	from customer_info
	where email=#{email}
</select>
<insert id="cartinsert" parameterType="com.pickme.beeze.customer.dto.CartDto">
	insert into cart(customer_id,s_product_id,quantity,order_yn)
	values(#{customerId},#{sProductId},#{quantity},0)
</insert>

<!-- 주문하기 -->
<insert id="order" parameterType="Integer">
	insert into `order`(cart_id,date)
	values(#{id},now())
</insert>
</mapper>